<dckm:CustomWindowContentBase x:Class="Fontendo.UI.UI_MainWindow"
             xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
             xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
             xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006" 
             xmlns:d="http://schemas.microsoft.com/expression/blend/2008" 
             xmlns:local="clr-namespace:Fontendo"
             xmlns:dckm="clr-namespace:Fontendo.DockManager"
             xmlns:controls="clr-namespace:Fontendo.Controls"
             xmlns:i="http://schemas.microsoft.com/xaml/behaviors"
             mc:Ignorable="d" 
             d:DesignHeight="580" d:DesignWidth="980"
             Loaded="UserControl_Loaded">

    <Grid x:Name="gridMain">
        <Grid Margin="10,0,10,10">
            <Grid.RowDefinitions>
                <RowDefinition Height="40"/>
                <!-- Menu -->
                <RowDefinition Height="32"/>
                <!-- File path + browse -->
                <RowDefinition Height="*"/>
                <!-- Main content -->
            </Grid.RowDefinitions>
            <Grid.ColumnDefinitions>
                <ColumnDefinition Width="*"/>
                <ColumnDefinition Width="100"/>
            </Grid.ColumnDefinitions>

            <!-- Menu -->
            <Menu Background="{DynamicResource WindowBackgroundBrushDark}">
                <MenuItem x:Name="upperFileMenu" Header="File"
                          SubmenuOpened="upperMenu_SubmenuOpened"
                          Style="{DynamicResource MenuItemNoIconStyle}"
                          Foreground="{DynamicResource ControlTextInactive}"
                          Height="32">
                    <MenuItem Header="Open" Click="MenuItem_Open_Click" Style="{DynamicResource MenuItemStyle}" local:ThemeHelper.IsThemed="False"/>
                    <MenuItem Header="Save" Click="MenuItem_Save_Click" Style="{DynamicResource MenuItemStyle}" local:ThemeHelper.IsThemed="False"/>
                    <MenuItem Header="Save As..." Click="MenuItem_SaveAs_Click" Style="{DynamicResource MenuItemStyle}" local:ThemeHelper.IsThemed="False"/>
                    <MenuItem x:Name="menuRecent" Header="Recent Items" Style="{DynamicResource MenuItemStyle}" local:ThemeHelper.IsThemed="False"/>
                    <MenuItem Header="Exit" Click="MenuItem_Close_Click" Style="{DynamicResource MenuItemStyle}" local:ThemeHelper.IsThemed="False"/>
                </MenuItem>
                <MenuItem Header="Theme" Click="MenuItem_Options_Click" Style="{DynamicResource MenuItemNoIconStyle}" local:ThemeHelper.IsThemed="False"/>
            </Menu>

            <!-- Logo -->
            <Image Grid.Column="1" Source="/Resources/Fontendo_small.png" HorizontalAlignment="Right"/>

            <!-- File path + browse -->
            <TextBox x:Name="textFontFilePath"
                     Grid.Row="1"
                     Background="{DynamicResource WindowBackgroundBrushMedium}"
                     IsReadOnly="True"
                     Height="27"
                     VerticalContentAlignment="Center"
                     FontFamily="{DynamicResource VestasSans}"
                     FontSize="12"
                     Padding="2"
                     Style="{DynamicResource TextBoxStyle1}">
                <i:Interaction.Behaviors>
                    <local:TextBoxEnterKeyUpdateBehavior/>
                </i:Interaction.Behaviors>
            </TextBox>

            <Button x:Name="btnBrowseFont"
                    Grid.Row="1" Grid.Column="1" Margin="1,1,0,1"
                    Content="..."
                    Height="27"
                    Background="{DynamicResource WindowBackgroundBrushMedium}"
                    ToolTip="Open File"
                    Cursor="Hand"
                    Style="{DynamicResource ButtonStyleImage}"
                    Click="MenuItem_Open_Click"/>

            <Grid x:Name="mainGrid" Grid.Row="2" Grid.ColumnSpan="2" Margin="0,10,0,30">
                <Grid.ColumnDefinitions>
                    <ColumnDefinition Width="190" MinWidth="190"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="100*" MinWidth="400"/>
                    <ColumnDefinition Width="5"/>
                    <ColumnDefinition Width="190" MinWidth="190"/>
                </Grid.ColumnDefinitions>

                <GridSplitter x:Name="leftSplitter" DragDelta="sideSplittersDragDelta" Grid.Column="1" Width="5" HorizontalAlignment="Left" ResizeDirection="Columns" ResizeBehavior="PreviousAndNext" Background="{DynamicResource WindowBackgroundBrushDark}" />
                <GridSplitter x:Name="rightSplitter" DragDelta="sideSplittersDragDelta" Grid.Column="3" Width="5" HorizontalAlignment="Left" ResizeDirection="Columns" ResizeBehavior="PreviousAndNext" Background="{DynamicResource WindowBackgroundBrushDark}" />

                <Grid x:Name="leftColumnWrapper" Grid.Column="0">
                    <controls:DockablePanel x:Name="dockablePanelFont" HeaderText="Font Properties"
                        Background="{DynamicResource WindowBackgroundBrushDark}" />
                </Grid>
                <Grid x:Name="rightColumnWrapper" Grid.Column="4">
                <controls:DockablePanel x:Name="dockablePanelGlyph" HeaderText="Glyph Properties"
                        Background="{DynamicResource WindowBackgroundBrushDark}" />
                </Grid>

                <Grid Grid.Column="2">
                    <Grid.ColumnDefinitions>
                        <ColumnDefinition Width="70*" MinWidth="200"/>
                        <ColumnDefinition Width="5"/>
                        <ColumnDefinition Width="30*" MinWidth="200"/>
                    </Grid.ColumnDefinitions>
                    <GridSplitter x:Name="centerSplitter" Grid.Column="1" Width="5" HorizontalAlignment="Left" ResizeDirection="Columns" ResizeBehavior="PreviousAndNext" Background="{DynamicResource WindowBackgroundBrushDark}" />

                    <!-- Left list -->
                    <ListView x:Name="listViewSheets"
          Background="#7A41C4"
          Foreground="White"
          BorderThickness="0"
          SelectionMode="Single"
          ItemsSource="{Binding Sheets}"
          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
          ScrollViewer.VerticalScrollBarVisibility="Auto"
          ItemContainerStyle="{DynamicResource GalleryListViewItemStyle}" SelectionChanged="listViewSheets_SelectionChanged">
                        <ListView.Template>
                            <ControlTemplate TargetType="ListView">
                                <Border BorderThickness="{TemplateBinding BorderThickness}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    Background="{TemplateBinding Background}">
                                    <ScrollViewer Style="{DynamicResource GalleryScrollViewerStyle}">
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Border>
                            </ControlTemplate>
                        </ListView.Template>
                        <!-- Use a WrapPanel for gallery layout -->
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel IsItemsHost="True"
                   Orientation="Horizontal"
                   Margin="10" Cursor="Hand"/>
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <!-- Each item: image + label -->
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <StackPanel Margin="10">
                                    <StackPanel.ContextMenu>
                                        <ContextMenu Style="{DynamicResource ContextMenuStyle1}">
                                            <MenuItem Header="Export Sheet"
                              Click="ExportSheet_Click"
                              Style="{DynamicResource MenuItemStyle}"
                              local:ThemeHelper.IsThemed="False"/>
                                            <MenuItem Header="Replace Sheet"
                              Click="ReplaceSheet_Click"
                              Style="{DynamicResource MenuItemStyle}"
                              local:ThemeHelper.IsThemed="False"/>
                                        </ContextMenu>
                                    </StackPanel.ContextMenu>
                                    <Image Source="{Binding Image}" Width="{Binding OriginalWidth}"
                       Stretch="Uniform"
                       HorizontalAlignment="Center"/>
                                    <TextBlock Text="{Binding Label}"
                           Foreground="{DynamicResource ControlTextActive}"
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
                                </StackPanel>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>



                    <!-- Right list -->

                    <ListView x:Name="listViewCharacters" Grid.Column="2"
          Background="#7A41C4"
          Foreground="White"
          BorderThickness="0"
          SelectionMode="Single"
          ItemsSource="{Binding Sheets}"
          ScrollViewer.HorizontalScrollBarVisibility="Disabled"
          ScrollViewer.VerticalScrollBarVisibility="Auto"
          ItemContainerStyle="{DynamicResource GalleryListViewItemStyle}" SelectionChanged="listViewCharacters_SelectionChanged">

                        <ListView.Template>
                            <ControlTemplate TargetType="ListView">
                                <Border BorderThickness="{TemplateBinding BorderThickness}"
                    BorderBrush="{TemplateBinding BorderBrush}"
                    Background="{TemplateBinding Background}">
                                    <ScrollViewer Style="{DynamicResource GalleryScrollViewerStyle}">
                                        <ItemsPresenter/>
                                    </ScrollViewer>
                                </Border>
                            </ControlTemplate>
                        </ListView.Template>
                        <!-- Use a WrapPanel for gallery layout -->
                        <ListView.ItemsPanel>
                            <ItemsPanelTemplate>
                                <WrapPanel IsItemsHost="True"
                   Orientation="Horizontal"
                   Margin="10" Cursor="Hand"/>
                            </ItemsPanelTemplate>
                        </ListView.ItemsPanel>
                        <!-- Each item: image + label -->
                        <ListView.ItemTemplate>
                            <DataTemplate>
                                <Grid Margin="10" MinWidth="55" MinHeight="55">
                                    <Grid.ContextMenu>
                                        <ContextMenu Style="{DynamicResource ContextMenuStyle1}">
                                            <MenuItem Header="Export Glyph"
                              Click="ExportGlyph_Click"
                              Style="{DynamicResource MenuItemStyle}"
                              local:ThemeHelper.IsThemed="False"/>
                                            <MenuItem Header="Replace Glyph"
                              Click="ReplaceGlyph_Click"
                              Style="{DynamicResource MenuItemStyle}"
                              local:ThemeHelper.IsThemed="False"/>
                                        </ContextMenu>
                                    </Grid.ContextMenu>
                                    <Grid.RowDefinitions>
                                        <RowDefinition Height="100*" />
                                        <RowDefinition Height="20" />
                                    </Grid.RowDefinitions>
                                    <Image Source="{Binding Image}" Width="{Binding OriginalWidth}"
                       Stretch="Uniform"
                       HorizontalAlignment="Center"/>
                                    <TextBlock Grid.Row="1" Text="{Binding Label}"
                           Foreground="{DynamicResource ControlTextActive}"
                           HorizontalAlignment="Center"
                           Margin="0,5,0,0"/>
                                </Grid>
                            </DataTemplate>
                        </ListView.ItemTemplate>
                    </ListView>
                </Grid>
            </Grid>
        </Grid>
    </Grid>
</dckm:CustomWindowContentBase>
